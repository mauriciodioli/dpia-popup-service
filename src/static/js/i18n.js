// static/js/i18n.js
(function () {
   const I18N = {
    es:{ title:"Nuevo Popup", subtitle:"Crea, previsualiza y guarda una publicidad.",
      context:"Contexto de segmentación", domain:"Dominio", category:"Categoría", lang:"Idioma", zip:"Código Postal",
      creative:"Creatividad", titleLabel:"Título", href:"URL destino", image:"Imagen (URL)", imageHint:"Usa HTTPS o habilita img-src data: en tu CSP.",
      width:"Ancho (px)", height:"Alto (px)", priority:"Prioridad", active:"Activo", yes:"Sí", no:"No",
      autoPreview:"Previsualizar automáticamente", previewPane:"Preview", placeholder:"Completa el formulario y previsualiza aquí.",
      preview:"Previsualizar", save:"Guardar",
      errorsTitle:"Revisá estos campos:",
      snippetTitle: "Snippet de inserción",
      snippetHelp: "Pegá esto en la página donde quieras que aparezca el popup.",
      hostLabel: "Host",
      hostAuto: "Origen del script (AUTO)",
      hostLocal: "http://127.0.0.1:8100",
      hostIP: "http://54.234.169.22:8100",
      hostProd: "https://api.dpia.site",
      copyScript: "Copiar",
      copyDiv: "Copiar",
      scriptTag: "«script»",
      email:"Correo electrónico",
      divTag: "«div class=\"dpia-popup-anchor\"»",
       manageTitle: "Mis Publicidades",
      searchPlaceholder: "email@dominio.com",
      search: "Buscar",
      new: "Nueva",
      thId: "ID",
      thTitle: "Título",
      thLang: "Idioma",
      thZip: "CP",
      thScope: "Ámbito",
      thCategory: "Categoría",
      thStatus: "Estado",
      thActions: "Acciones",
      emptyMsg: "No hay publicaciones para este usuario.",

      editPopup: "Editar Popup",
      lblTitle: "Título",
      lblLink: "Link destino",
      lblImage: "Imagen URL",
      lblLang: "Idioma",
      lblZip: "Código Postal",
      lblPriority: "Prioridad",
      lblWidth: "Ancho",
      lblHeight: "Alto",
      lblStatus: "Estado",
      lblScopeId: "Ámbito (ID)",
      lblCategoryId: "Categoría (ID)",
      cancel: "Cancelar",
      saveChanges: "Guardar cambios",

      snippetTitle: "Snippet de inserción",
      hostLabel: "Host",
      hostAuto: "Origen del script (AUTO)",
      hostLocal: "http://127.0.0.1:8100",
      hostIP: "http://54.234.169.22:8100",
      hostProd: "https://api.dpia.site",
      modeLabel: "Modo",
      modeText: "Por nombres (dominio/categoría/lang/cp)",
      modeId: "Por IDs (ambito_id/categoria_id/cp_id)",
      copyScript: "Copiar <script>",
      copyDiv: "Copiar <div>"
      
    },
    en:{ title:"New Popup", subtitle:"Create, preview and save an ad.",
      context:"Targeting context", domain:"Domain", category:"Category", lang:"Language", zip:"Postal Code",
      creative:"Creative", titleLabel:"Title", href:"Destination URL", image:"Image (URL)", imageHint:"Use HTTPS or allow img-src data: in your CSP.",
      width:"Width (px)", height:"Height (px)", priority:"Priority", active:"Active", yes:"Yes", no:"No",
      autoPreview:"Auto preview", previewPane:"Preview", placeholder:"Fill the form to preview here.",
      preview:"Preview", save:"Save",
      errorsTitle:"Please fix these fields:",
      snippetTitle: "Embed snippet",
      snippetHelp: "Paste this where you want the popup to appear.",
      hostLabel: "Host",
      hostAuto: "Script origin (AUTO)",
      hostLocal: "http://127.0.0.1:8100",
      hostIP: "http://54.234.169.22:8100",
      hostProd: "https://api.dpia.site",
      copyScript: "Copy",
      copyDiv: "Copy",
      scriptTag: "«script»",
      email:"Email",
      divTag: "«div class=\"dpia-popup-anchor\"»",
       manageTitle: "My Ads",
      searchPlaceholder: "email@domain.com",
      search: "Search",
      new: "New",
      thId: "ID",
      thTitle: "Title",
      thLang: "Lang",
      thZip: "ZIP",
      thScope: "Scope",
      thCategory: "Category",
      thStatus: "Status",
      thActions: "Actions",
      emptyMsg: "No ads for this user.",

      editPopup: "Edit Popup",
      lblTitle: "Title",
      lblLink: "Destination link",
      lblImage: "Image URL",
      lblLang: "Language",
      lblZip: "Postal Code",
      lblPriority: "Priority",
      lblWidth: "Width",
      lblHeight: "Height",
      lblStatus: "Status",
      lblScopeId: "Scope (ID)",
      lblCategoryId: "Category (ID)",
      cancel: "Cancel",
      saveChanges: "Save changes",

      snippetTitle: "Embed snippet",
      hostLabel: "Host",
      hostAuto: "Script origin (AUTO)",
      hostLocal: "http://127.0.0.1:8100",
      hostIP: "http://54.234.169.22:8100",
      hostProd: "https://api.dpia.site",
      modeLabel: "Mode",
      modeText: "By names (domain/category/lang/zip)",
      modeId: "By IDs (scope_id/category_id/zip_id)",
      copyScript: "Copy <script>",
      copyDiv: "Copy <div>"
    },
    pl:{ title:"Nowy Popup", subtitle:"Utwórz, podejrzyj i zapisz reklamę.",
      context:"Kontekst targetowania", domain:"Domena", category:"Kategoria", lang:"Język", zip:"Kod pocztowy",
      creative:"Kreacja", titleLabel:"Tytuł", href:"Adres docelowy", image:"Obraz (URL)", imageHint:"Użyj HTTPS lub zezwól na img-src data: w CSP.",
      width:"Szerokość (px)", height:"Wysokość (px)", priority:"Priorytet", active:"Aktywny", yes:"Tak", no:"Nie",
      autoPreview:"Podgląd automatyczny", previewPane:"Podgląd", placeholder:"Wypełnij formularz, aby zobaczyć podgląd.",
      preview:"Podgląd", save:"Zapisz",
      errorsTitle:"Popraw te pola:",
       snippetTitle: "Fragment do wklejenia",
      snippetHelp: "Wklej to na stronie, gdzie ma pojawić się popup.",
      hostLabel: "Host",
      hostAuto: "Pochodzenie skryptu (AUTO)",
      hostLocal: "http://127.0.0.1:8100",
      hostIP: "http://54.234.169.22:8100",
      hostProd: "https://api.dpia.site",
      copyScript: "Kopiuj",
      copyDiv: "Kopiuj",
      scriptTag: "«script»",
      email:"E-mail", 
      divTag: "«div class=\"dpia-popup-anchor\"»",
       manageTitle: "Moje reklamy",
      searchPlaceholder: "email@domena.com",
      search: "Szukaj",
      new: "Nowa",
      thId: "ID",
      thTitle: "Tytuł",
      thLang: "Język",
      thZip: "Kod pocztowy",
      thScope: "Zakres",
      thCategory: "Kategoria",
      thStatus: "Status",
      thActions: "Akcje",
      emptyMsg: "Brak reklam dla tego użytkownika.",

      editPopup: "Edytuj Popup",
      lblTitle: "Tytuł",
      lblLink: "Link docelowy",
      lblImage: "URL obrazu",
      lblLang: "Język",
      lblZip: "Kod pocztowy",
      lblPriority: "Priorytet",
      lblWidth: "Szerokość",
      lblHeight: "Wysokość",
      lblStatus: "Status",
      lblScopeId: "Zakres (ID)",
      lblCategoryId: "Kategoria (ID)",
      cancel: "Anuluj",
      saveChanges: "Zapisz zmiany",

      snippetTitle: "Fragment osadzenia",
      hostLabel: "Host",
      hostAuto: "Pochodzenie skryptu (AUTO)",
      hostLocal: "http://127.0.0.1:8100",
      hostIP: "http://54.234.169.22:8100",
      hostProd: "https://api.dpia.site",
      modeLabel: "Tryb",
      modeText: "Według nazw (domena/kategoria/język/kod)",
      modeId: "Według ID (ambito_id/kategoria_id/cp_id)",
      copyScript: "Kopiuj <script>",
      copyDiv: "Kopiuj <div>"
    }
  
  };

  // estado compartido
  window.DPIA = window.DPIA || {};
  window.DPIA.state = window.DPIA.state || { lang: "es" };

  window.DPIA.$t = (k) => {
    const lang = window.DPIA.state.lang || "es";
    const dict = I18N[lang] || I18N.es;
    return (dict && dict[k]) || (I18N.es && I18N.es[k]) || k;
  };

  window.DPIA.applyI18n = function applyI18n() {
    document.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      el.textContent = window.DPIA.$t(key);
    });
  };
})();
