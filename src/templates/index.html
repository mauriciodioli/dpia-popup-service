<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Datos del Sheet</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <h1>Cargar país del Sheet</h1>
  <select id="pais" name="pais">
    <option value="">Seleccione un país</option>
    <option value="argentina">Argentina</option>
    <option value="canada">Canadá</option>
    <option value="francia">Francia</option>
    <option value="italia">Italia</option>
    <option value="estados_unidos">Estados Unidos</option>
    <option value="alemania">Alemania</option>
    <option value="espana">España</option>
  </select>

  <script>
    $('#pais').change(function () {
      const selectedCountry = $(this).val();

      if (!selectedCountry) {
        Swal.fire("Error", "Por favor, selecciona un país.", "error");
        return;
      }

      Swal.fire({
        title: 'Enviando...',
        text: 'Estamos cargando los datos del país: ' + selectedCountry,
        didOpen: () => Swal.showLoading()
      });

      $.ajax({
        url: "/resultado_carga",
        method: "POST",
        data: { sheet_name: selectedCountry },
        success: function (response) {
          Swal.fire("¡Éxito!", "Los datos se cargaron correctamente.", "success");
          // Si tu backend responde con HTML completo, podrías también reemplazar una parte del DOM
          // $('#resultado').html(response);
        },
        error: function () {
          Swal.fire("Error", "No se pudo cargar el sheet.", "error");
        }
      });
    });
  </script>
</body>
</html>
